<% @page = {
  title: nil,
  heading: nil
} %>

<form action="/presets" method="POST">

  <div class="row justify-content-center">

    <div>
      <img id="control-icon" class="px-4 img-fluid" src="https://i.imgur.com/Za0rRHL.png" alt="left click to increase volume by 10">
    </div>

    <div id="global-control" class="dropdown">

        <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" <%= 'data-offset="-5"' if logged_in? %>><%= logged_in? ? "save" : "log in" %></button>

        <button id="toggle-play" type="button" class="btn"><i id="toggle-play-icon" class="fas fa-pause"></i></button>

        <button id="reset-all" type="button" class="btn">reset</button>

      <div class="dropdown-menu">

        <% if logged_in? %>

        <div class="px-3 py-1">

          <div class="form-group">
            <input type="text" name="title" value="" placeholder="Give it a title (optional)" autofocus>
          </div>

          <div class="form-group">
            <textarea name="description" rows="4" cols="20" placeholder="And a short description! (optional)"></textarea>
            <button id="save-preset" class="btn btn-block" type="submit">submit</button>
          </div>

        </div> <!-- px-3 py-1 -->

        <% else %>

          <%= erb :"/sessions/partials/form" %>

        <% end %>

      </div> <!-- dropdown-menu -->

    </div> <!-- dropdown -->

    <div>
      <img id="control-icon" class="px-4 img-fluid" src="https://i.imgur.com/eqsk7Yr.png" alt="left click to increase volume by 10">
    </div>

  </div> <!-- row -->

  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <!-- <div>&nbsp;</div> -->

  <div class="container">

    <div class="row justify-content-center">

      <% Preset.elements.each do |element| %>

        <div class="col-sm-3 text-center">
          <button id="<%= element %>" type="button" class="btn preset-button">

            <i id="<%= element %>-icon" class="<%= Preset.source(element)[:icon] %> inactive-sound fa-fw"></i>

          </button>

          <audio id="<%= element %>-audio" preload="auto" loop>
            <source src="<%= Preset.source(element)[:url] %>" type="audio/mpeg">
          </audio>

          <div>&nbsp;</div>

          <input id="<%= element %>-input" class="form-control-plaintext text-center" type="number" name="<%= element %>" value="0" hidden>

          <span id="<%= element %>-volume" class="badge badge-pill"></span>&nbsp;

        </div> <!-- col-sm-3 -->

      <% end %>

    </div> <!-- row -->

  </div> <!-- container -->

</form>
