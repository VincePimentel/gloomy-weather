<% @page_info = {
  title: "Sign Up",
  heading: "SIGN UP"
} %>

<%
# Validate user input via server or client (via Bootstrap)
server_validation = true
@user ||= User.new
%>

<div class="col-md-5 mx-auto">

  <form class="" action="/users" method="POST">

    <!-- USERNAME -->
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" class="form-control <%= "is-invalid" if @user.errors[:username].any? %>" id="username" name="username" value="<%= @user.username %>" placeholder="Minimum 3 characters" autofocus <%= "required" if !server_validation %>>

      <% if @user.errors[:username].any? %>

        <div class="invalid-feedback alert alert-danger" role="alert">

          <% @user.errors.full_messages.each do |message| %>
            <% next if !message.downcase.include?("username") %>
              <p><%= message %>.</p>
          <% end %>

        </div>

      <% end %>

    </div>

    <!-- PASSWORD -->
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" class="form-control <%= "is-invalid" if @user.errors[:password].any? %>" id="password" name="password" value="<%= @user.password %>" placeholder="Minimum 6 characters" <%= "required" if !server_validation %>>

      <% if @user.errors[:password].any? %>

        <div class="invalid-feedback alert alert-danger" role="alert">

          <% @user.errors.full_messages.each do |message| %>
            <% next if !message.downcase.include?("password") || message.downcase.include?("confirm") %>
              <p><%= message %>.</p>
          <% end %>

        </div>

      <% end %>

    </div>

    <!-- PASSWORD CONFIRMATION -->
    <div class="form-group">
      <label for="password_confirmation">Confirm Password</label>
      <input type="password" class="form-control <%= "is-invalid" if @user.errors[:password_confirmation].any? %>" id="password_confirmation" name="password_confirmation" value="<%= @user.password_confirmation %>" placeholder="Re-type new password" <%= "required" if !server_validation %>>

      <% if @user.errors[:password_confirmation].any? %>

        <div class="invalid-feedback alert alert-danger" role="alert">

          <% @user.errors.full_messages.each do |message| %>
            <% next if !message.downcase.include?("password") %>
              <p><%= message %>.</p>
          <% end %>

        </div>

      <% end %>

    </div>

    <button type="submit" class="btn btn-block">Sign Up</button>

  </form>

</div>
