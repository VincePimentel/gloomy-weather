<% @user ||= current_user %>

<form class="px-4 py-3" action="/users/account" method="POST">

  <input type="hidden" name="_method" value="PATCH">

  <!-- USERNAME -->
  <div class="form-group">
    <label for="username">Username</label>
    <input type="text" class="form-control <%= "is-invalid" if @user.errors[:username].any? %>" id="username" name="username" value="<%= @user.username || current_user.username %>" placeholder="Minimum 3 characters" <%= "autofocus" if @user.errors[:username].any? %>>

    <% if @user.errors[:username].any? %>

      <div class="invalid-feedback alert alert-danger" role="alert">

        <% @user.errors[:username].each do |message| %>

          • <%= "Username #{message}" %>.<br>

        <% end %>

      </div>

    <% end %>

  </div>

  <!-- PASSWORD -->
  <div class="form-group">
    <label for="password">New Password</label>
    <input type="password" class="form-control <%= "is-invalid" if @user.errors[:password].any? %>" id="password" name="password" placeholder="Minimum 6 characters">

    <% if @user.errors[:password].any? %>

      <div class="invalid-feedback alert alert-danger" role="alert">

        <% @user.errors[:password].each do |message| %>

          • <%= "Password #{message}" %>.<br>

        <% end %>

      </div>

    <% end %>

  </div>

  <!-- PASSWORD CONFIRMATION -->
  <div class="form-group">
    <label for="password_confirmation">Confirm New Password</label>
    <input type="password" class="form-control <%= "is-invalid" if @user.errors[:password_confirmation].any? %>" id="password_confirmation" name="password_confirmation" placeholder="Re-type new password">

    <% if @user.errors[:password_confirmation].any? %>

      <div class="invalid-feedback alert alert-danger" role="alert">

        <% @user.errors[:password_confirmation].each do |message| %>

          • <%= "Password confirmation #{message}" %>.<br>

        <% end %>

      </div>

    <% end %>

  </div>

  <button type="submit" class="btn btn-block">Update</button>

</form>
